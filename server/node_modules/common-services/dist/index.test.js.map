{"version":3,"sources":["../src/index.test.ts"],"names":["describe","files","beforeAll","done","fs","readdir","__dirname","err","_files_","test","Promise","all","filter","file","includes","endsWith","map","require","path","join","default","then","modules","assert","deepEqual","Object","keys","services","sort","name","replace","module","concat","catch"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;;;;;;;AAEAA,QAAQ,CAAC,OAAD,EAAU,MAAM;AACtB,MAAIC,KAAJ;AAEAC,EAAAA,SAAS,CAAEC,IAAD,IAAU;AAClBC,gBAAGC,OAAH,CAAWC,SAAX,EAAsB,CAACC,GAAD,EAAMC,OAAN,KAAkB;AACtC,UAAID,GAAJ,EAAS;AACPJ,QAAAA,IAAI,CAACI,GAAD,CAAJ;AACA;AACD;;AACDN,MAAAA,KAAK,GAAGO,OAAR;AACAL,MAAAA,IAAI;AACL,KAPD;AAQD,GATQ,CAAT;AAWAM,EAAAA,IAAI,CAAC,8CAAD,EAAkDN,IAAD,IAAU;AAC7DO,IAAAA,OAAO,CAACC,GAAR,CACEV,KAAK,CACFW,MADH,CACWC,IAAD,IAAU,CAAC,CAAC,GAAD,EAAM,IAAN,EAAY,UAAZ,EAAwBC,QAAxB,CAAiCD,IAAjC,CADrB,EAEGD,MAFH,CAEWC,IAAD,IAAU,CAACA,IAAI,CAACE,QAAL,CAAc,UAAd,CAFrB,EAGGH,MAHH,CAGWC,IAAD,IAAUA,IAAI,KAAK,eAH7B,EAIGD,MAJH,CAIWC,IAAD,IAAU,CAACA,IAAI,CAACE,QAAL,CAAc,OAAd,CAJrB,EAKGH,MALH,CAKWC,IAAD,IAAU,CAACA,IAAI,CAACE,QAAL,CAAc,UAAd,CALrB,EAMGC,GANH,CAMQH,IAAD,IAAUI,OAAO,CAACC,cAAKC,IAAL,CAAUb,SAAV,EAAqBO,IAArB,CAAD,CAAP,CAAoCO,OANrD,CADF,CAOiE;AAPjE,MASGC,IATH,CASSC,OAAD,IAAa;AACjBC,sBAAOC,SAAP,CACEC,MAAM,CAACC,IAAP,CAAYC,QAAZ,EACGC,IADH,GAEGZ,GAFH,CAEQa,IAAD,IAAUA,IAAI,CAACC,OAAL,CAAa,mBAAb,EAAkC,QAAlC,CAFjB,CADF,EAIER,OAAO,CACJN,GADH,CACQe,MAAD,IAAaA,MAAD,CAAgBF,IADnC,EAEGb,GAFH,CAEQa,IAAD,IAAUA,IAAI,CAACC,OAAL,CAAa,WAAb,EAA0B,EAA1B,CAFjB,EAGE;AAHF,OAIGE,MAJH,CAIU,CAAC,gBAAD,EAAmB,qBAAnB,CAJV,EAKGJ,IALH,EAJF;AAWD,KArBH,EAsBGP,IAtBH,CAsBQ,MAAMlB,IAAI,EAtBlB,EAuBG8B,KAvBH,CAuBS9B,IAvBT;AAwBD,GAzBG,CAAJ;AA0BD,CAxCO,CAAR","sourcesContent":["import assert from 'assert';\nimport fs from 'fs';\nimport path from 'path';\nimport * as services from './index';\n\ndescribe('index', () => {\n  let files;\n\n  beforeAll((done) => {\n    fs.readdir(__dirname, (err, _files_) => {\n      if (err) {\n        done(err);\n        return;\n      }\n      files = _files_;\n      done();\n    });\n  });\n\n  test('should import all services of the src folder', (done) => {\n    Promise.all(\n      files\n        .filter((file) => !['.', '..', 'index.ts'].includes(file))\n        .filter((file) => !file.endsWith('.test.ts'))\n        .filter((file) => file !== '__snapshots__')\n        .filter((file) => !file.endsWith('.d.ts'))\n        .filter((file) => !file.endsWith('.mock.ts'))\n        .map((file) => require(path.join(__dirname, file)).default), // eslint-disable-line\n    )\n      .then((modules) => {\n        assert.deepEqual(\n          Object.keys(services)\n            .sort()\n            .map((name) => name.replace(/^init(.*)Service$/, 'init$1')),\n          modules\n            .map((module) => (module as any).name as string)\n            .map((name) => name.replace(/(bound )*/, ''))\n            // Also exports LogService defaults/interfaces\n            .concat(['DEFAULT_LOGGER', 'DEFAULT_LOG_ROUTING'])\n            .sort(),\n        );\n      })\n      .then(() => done())\n      .catch(done);\n  });\n});\n"],"file":"index.test.js"}